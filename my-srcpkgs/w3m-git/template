# Template file for 'w3m-git'
_my_field_repo=git://github.com/tats/w3m.git
build_style=gnu-configure
configure_args="--libexecdir=/usr/lib --with-termlib=ncurses --disable-w3mmailer --enable-image"
conflicts=w3m
homepage="https://tracker.debian.org/pkg/w3m"
hostmakedepends="git pkg-config gc-devel perl"
license="MIT"
maintainer="Orphaned <orphan@voidlinux.org>"
makedepends="zlib-devel ncurses-devel gc-devel libressl-devel libsixel"
pkgname=w3m-git
provides=w3m-0_1
revision=1
short_desc="Text-based Web browser and pager (with Debian patches)"
version=74efea9

w3m-git_package() {
    true
}

do_fetch() {
    git clone $_my_field_repo ${pkgname}-${version}
}

pre_build() {
    # build host mktable
    if [ "$CROSS_BUILD" ]; then
        make CC=cc CFLAGS=-Os LD=ld LDFLAGS= mktable
        mv mktable host-mktable
        chmod 755 host-mktable
        make clean
        sed -e 's,./mktable$(EXT),./host-mktable$(EXT),g' -i Makefile
    fi
}

post_install() {
    vlicense doc/README
}
