# Template file for 'LGOGDownloader-git'
_my_field_repo=git://github.com/Sude-/lgogdownloader.git
build_style=cmake
conflicts=LGOGDownloader
homepage="https://github.com/Sude-/lgogdownloader"
hostmakedepends="git pkg-config"
license="WTFPL"
maintainer="Orphaned <orphan@voidlinux.org>"
makedepends="htmlcxx-devel tinyxml2-devel libcurl-devel liboauth-devel rhash-devel jsoncpp-devel boost-devel libressl-devel zlib-devel"
pkgname=LGOGDownloader-git
provides=LGOGDownloader-0_1
revision=1
short_desc="Open source downloader for GOG.com games that uses the GOG.com API"
version=0a7648d

LGOGDownloader-git_package() {
    true
}

do_fetch() {
    git clone $_my_field_repo ${pkgname}-${version}
}

if [ -z "$CROSS_BUILD" ]; then
    hostmakedepends+=" help2man"
fi

case "$XBPS_TARGET_MACHINE" in
    armv6*|ppc|ppc-musl) makedepends+=" libatomic-devel" # Need libatomic for __atomic_fetch_add_8 etc.
esac

pre_configure() {
    case "$XBPS_TARGET_MACHINE" in
        armv6*|ppc|ppc-musl) sed -i 's/PRIVATE ${ZLIB_LIBRARIES}/\0\n  atomic/' CMakeLists.txt
    esac
}
