# Template file for 'youtube-dl'
_my_field_repo=git://github.com/ytdl-org/youtube-dl.git
pkgname=youtube-dl-git
conflicts="youtube-dl>=0"
replaces="youtube-dl>=0"
version=049c048
revision=1
archs=noarch
build_style=python3-module
# make zip pandoc - prereqs for shell completions
hostmakedepends="git make zip pandoc python3-setuptools"
depends="python3-setuptools"
checkdepends="flake8 python3-nose"
short_desc="CLI program to download videos from YouTube and other sites"
maintainer="Daniel Ey√üer <daniel.eysser@gmail.com>"
license="Unlicense"
homepage="https://ytdl-org.github.io/youtube-dl/"
changelog="https://raw.githubusercontent.com/ytdl-org/youtube-dl/master/ChangeLog"

do_check() {
	PYTHON=/usr/bin/python3 make offlinetest
}

# shell completion
do_configure() {
	make
}

post_install() {
	rm -rf ${DESTDIR}/usr/etc
	vinstall youtube-dl.bash-completion 644 usr/share/bash-completion/completions youtube-dl
	vinstall youtube-dl.zsh 644 usr/share/zsh/site-functions _youtube-dl
	vinstall youtube-dl.fish 644 usr/share/fish/vendor_completions.d
}
