# Template file for 'inter-font'
pkgname=inter-font
version=254473e
revision=1
build_style=gnu-makefile
hostmakedepends="font-util fontforge"
short_desc="The Inter font family"
maintainer="Evgenii Burmentev <vir.found@gmail.com>"
license="OFL-1.1"
homepage="https://github.com/rsms/inter"
font_dirs="/usr/share/fonts/TTF"

_my_field_repo=https://github.com/rsms/inter.git
_my_field_skip_version=1787592
conflicts="inter-font>=0"
hostmakedepends+=" git"
pkgname+=-git
replaces="inter-font>=0"
unset checksum distfiles wrksrc

# TODO remove
# https://github.com/rsms/inter/issues/470#issuecomment-1224785644
hostmakedepends+=" ttfautohint"
post_patch() {
	sed -i 's@$(PWD)/build/venv/lib/python/site-packages/ttfautohint@-m ttfautohint@' Makefile
}

do_install() {
	vmkdir usr/share/fonts/TTF
	vcopy build/*.ttf usr/share/fonts/TTF
	vlicense LICENSE.txt
}
