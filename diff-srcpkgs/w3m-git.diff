-pkgname=w3m
-wrksrc="${pkgname}-${version/+/-}"
+_my_field_repo=git://github.com/tats/w3m.git
+pkgname=w3m-git
+conflicts="w3m>=0"
+replaces="w3m>=0"
+wrksrc="${pkgname}-${version/.git/-git}"
-configure_args="--libexecdir=/usr/lib --enable-image=x11,fb
- --with-nkf=/usr/bin/nkf
- --with-imagelib=imlib2 --with-termlib=ncurses --disable-w3mmailer"
-hostmakedepends="pkg-config gc-devel perl gettext nkf"
-makedepends="zlib-devel ncurses-devel gc-devel libressl-devel imlib2-devel
- libX11-devel"
+configure_args="--libexecdir=/usr/lib --with-termlib=ncurses --disable-w3mmailer --enable-image"
+hostmakedepends="git pkg-config gc-devel perl gettext"
+makedepends="zlib-devel ncurses-devel gc-devel libressl-devel" # libsixel-git
+depends="" # libsixel-git
-LDFLAGS="-lX11"
-
-post_patch() {
-	rm -f Bonus/oldconfigure.sh
-	vsed -i -e 's,/usr/local/bin,/usr/bin,g' \
-		Bonus/makeref Bonus/scanhist.rb Bonus/html2latex \
-		scripts/w3mman/hlink.cgi
-	chmod +x Bonus/scanhist.rb Bonus/utf8.cgi
-}
-
-do_check() {
-	cd tests
-	sh run_tests
-}
-
-	local _file
-	vlicense doc/README
-	for _file in doc/HISTORY doc/README* doc/*.html
-	do
-		vdoc "$_file"
-	done
-	for _file in doc/keymap* doc/menu*
-	do
-		vsconf "$_file"
-	done
-	vcopy Bonus usr/share/examples/w3m/bonus
-}
-
-w3m-img_package() {
-	depends="${sourcepkg}>=${version}_${revision}"
-	short_desc+=" - image display support"
-	pkg_install() {
-		vmove usr/lib/w3m/w3mimgdisplay
-		vmove usr/share/doc/w3m/README.img
-	}
+	vlicense ${wrksrc}/doc/README
