+wrksrc=$pkgname
+configure_args="-Dwerror=false"
-depends="${pkgname}-terminfo>=${version}_${revision} libutempter"
+depends="${pkgname}-terminfo>=${version}_${revision}"
-changelog="https://codeberg.org/dnkl/foot/raw/branch/master/CHANGELOG.md"
+changelog="https://codeberg.org/dnkl/foot/src/branch/master/CHANGELOG.md"
+PGO=partial
+_my_field_repo=https://codeberg.org/dnkl/foot.git
+conflicts="foot>=0"
+depends=${depends/${pkgname}-terminfo>=${version}_${revision}/foot-terminfo-git>=${version}_${revision}}
+export CFLAGS+=" -O3"
+export CXXFLAGS+=" -O3"
+hostmakedepends+=" git"
+hostmakedepends=${hostmakedepends/wayland-devel/}
+makedepends=${makedepends/libutf8proc-devel/}
+pkgname+=-git
+replaces="foot>=0"
+unset checksum distfiles wrksrc
+
+# TODO remove me
+makedepends+=" nghttp2-devel libssh2-devel"
+
+# steps only for PGO
+# taken from https://aur.archlinux.org/cgit/aur.git/plain/PKGBUILD?h=foot-git
+do_build() {
+	./pgo/pgo.sh \
+		${PGO} \
+		. build \
+		--prefix=/usr \
+		--wrap-mode=nodownload \
+		-Dterminfo=disabled \
+		-Dthemes=false
+}
+
+
+	vmkdir usr/share/examples/foot/themes
+	vcopy "themes/*" usr/share/examples/foot/themes
-foot-terminfo_package() {
+foot-terminfo-git_package() {
+
+	conflicts="foot-terminfo>=0"
+	replaces="foot-terminfo>=0"
