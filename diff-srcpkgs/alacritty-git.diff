-pkgname=alacritty
+_my_field_repo=git://github.com/jwilm/alacritty
+pkgname=alacritty-git
+conflicts="alacritty>=0"
+replaces="alacritty>=0"
-hostmakedepends="pkg-config python3"
+configure_args="--no-default-features --features wayland"
+hostmakedepends="git pkg-config"
-depends="libXxf86vm ncurses alacritty-terminfo-${version}_${revision}"
+depends="libXxf86vm ncurses alacritty-terminfo-git-${version}_${revision}"
-changelog="https://raw.githubusercontent.com/jwilm/${pkgname}/v${version}/CHANGELOG.md"
+
+do_build() {
+	cargo build --manifest-path alacritty/Cargo.toml --release --target ${RUST_TARGET} ${configure_args}
+}
-	cargo install --path ${pkgname} --target ${RUST_TARGET} --root="${DESTDIR}/usr" --locked
+	cargo install --path alacritty --target ${RUST_TARGET} --root="${DESTDIR}/usr" --locked ${configure_args}
-	vinstall extra/linux/alacritty.desktop 644 usr/share/applications
+	vinstall extra/linux/Alacritty.desktop 644 usr/share/applications
-	vsconf alacritty.yml
+	vinstall alacritty.yml 644 usr/share/examples/alacritty
-alacritty-terminfo_package() {
+alacritty-terminfo-git_package() {
+	conflicts="alacritty-terminfo>=0"
+	replaces="alacritty-terminfo>=0"
