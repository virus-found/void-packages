# Template file for 'mosh'
pkgname=mosh
version=1.4.0
revision=1
build_style=gnu-configure
hostmakedepends="perl pkg-config protobuf"
makedepends="ncurses-devel protobuf-devel libutempter-devel openssl-devel"
depends="perl-IO-Tty"
short_desc="Mobile shell, remote terminal application that allows roaming"
maintainer="Orphaned <orphan@voidlinux.org>"
license="GPL-3.0-or-later"
homepage="https://mosh.org/"
distfiles="https://github.com/mobile-shell/mosh/releases/download/mosh-${version}/mosh-${version}.tar.gz"
checksum=d93ec9b2b0a012f59c4b8d5902b8a70b45db01e32c7c1ef7e5acd84ecebbb95f
broken="checksum changed, and I don't know if it's intended"

pre_configure() {
	# make local.test always succeed. It fails due to missing X server in chroot.
	printf "%s\n" "#!/bin/sh" ":" > src/tests/local.test
}
